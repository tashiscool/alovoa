# E2E Test Profile Configuration
# This profile is used for end-to-end testing with docker-compose.e2e.yml

# ============================================================
# SMTP Configuration for MailHog (E2E Testing)
# ============================================================
# MailHog is a test SMTP server that catches all emails without sending them
# Web UI: http://localhost:8025 | SMTP: mailhog:1025

# CRITICAL: Disable SMTP connection testing on startup to prevent blocking/failures
# The environment variable SPRING_MAIL_TEST_CONNECTION from docker-compose.e2e.yml
# should override this, but we set it explicitly to ensure it's disabled
spring.mail.test-connection=false

# MailHog SMTP configuration (already set via environment variables in docker-compose.e2e.yml)
# These are fallback defaults if environment variables are not set
spring.mail.host=${SPRING_MAIL_HOST:mailhog}
spring.mail.port=${SPRING_MAIL_PORT:1025}
spring.mail.username=${SPRING_MAIL_USERNAME:}
spring.mail.password=${SPRING_MAIL_PASSWORD:}
spring.mail.properties.mail.smtp.auth=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH:false}
spring.mail.properties.mail.smtp.starttls.enable=${SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE:false}
spring.mail.properties.mail.smtp.ssl.checkserveridentity=false

# ============================================================
# Database Configuration (MariaDB for E2E)
# ============================================================
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mariadb://mariadb:3306/alovoa?serverTimezone=UTC}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:alovoa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:alovoa_e2e}

# ============================================================
# Redis Configuration
# ============================================================
spring.redis.host=${SPRING_REDIS_HOST:redis}
spring.redis.port=${SPRING_REDIS_PORT:6379}

# ============================================================
# Logging Configuration (More verbose for E2E debugging)
# ============================================================
logging.level.org.springframework.mail=DEBUG
logging.level.com.sun.mail=DEBUG

# ============================================================
# Rate Limiting (Disabled for E2E tests)
# ============================================================
bucket4j.enabled=${BUCKET4J_ENABLED:false}

# ============================================================
# Session Configuration
# ============================================================
server.servlet.session.timeout=2h
server.servlet.session.cookie.max-age=2h
