<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments :: head}"></head>

<body class="aura-page">
<link rel="stylesheet" th:href="@{/css/aura.css}"/>
<div th:replace="~{fragments :: header}"></div>

<!-- Hero Section -->
<div class="aura-hero">
    <h1><i class="fas fa-star mr-2"></i> <span th:text="#{reputation.title}">Your Reputation</span></h1>
    <p>Build trust through positive interactions</p>
</div>

<div class="aura-container">
    <!-- Overall Score Card -->
    <div class="aura-card aura-animate-fade-up" style="text-align: center; padding: 2rem;">
        <div class="aura-score-circle">
            <svg width="160" height="160" viewBox="0 0 160 160">
                <defs>
                    <linearGradient id="aura-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#7c3aed"/>
                        <stop offset="100%" style="stop-color:#ec4899"/>
                    </linearGradient>
                </defs>
                <circle class="circle-bg" cx="80" cy="80" r="65"/>
                <circle class="circle-progress" cx="80" cy="80" r="65"
                        th:style="'stroke-dashoffset: ' + (408 - (408 * ${overallScore} / 100))"/>
            </svg>
            <div class="aura-score-value">
                <div class="aura-score-number" th:text="${overallScore}">75</div>
                <div class="aura-score-label">Score</div>
            </div>
        </div>

        <div style="margin-top: 1.5rem;">
            <span class="aura-trait" th:classappend="${trustLevel == 'HIGHLY_TRUSTED'} ? 'aura-trait-positive' :
                (${trustLevel == 'UNDER_REVIEW' or trustLevel == 'RESTRICTED'} ? 'aura-trait-negative' : '')"
                  style="font-size: 1rem; padding: 0.75rem 1.5rem;">
                <i th:class="${trustLevel == 'HIGHLY_TRUSTED'} ? 'fas fa-shield-alt' :
                    (${trustLevel == 'TRUSTED'} ? 'fas fa-check-circle' :
                    (${trustLevel == 'VERIFIED'} ? 'fas fa-user-check' :
                    (${trustLevel == 'NEW_MEMBER'} ? 'fas fa-user' :
                    (${trustLevel == 'UNDER_REVIEW'} ? 'fas fa-clock' : 'fas fa-exclamation-triangle'))))"></i>
                <span th:text="${trustLevel}" style="margin-left: 0.5rem;">Trusted</span>
            </span>
        </div>
    </div>

    <!-- Badges -->
    <div class="aura-card aura-animate-fade-up" th:if="${not #lists.isEmpty(badges)}">
        <div class="aura-card-header">
            <div class="aura-card-icon"><i class="fas fa-award"></i></div>
            <div>
                <div class="aura-card-title" th:text="#{reputation.badges}">Your Badges</div>
                <div class="aura-card-subtitle">Achievements you've earned</div>
            </div>
        </div>
        <div class="aura-traits">
            <span th:each="badge : ${badges}" class="aura-trait aura-trait-positive">
                <i th:class="${'fas fa-' + badge.icon}"></i>
                <span th:text="${badge.name}">Badge</span>
            </span>
        </div>
    </div>

    <!-- Score Breakdown -->
    <div class="aura-stats aura-stagger">
        <div class="aura-stat">
            <div class="aura-stat-value" th:text="${responseQuality}">85</div>
            <div class="aura-stat-label"><i class="fas fa-comments mr-1"></i> Response</div>
        </div>
        <div class="aura-stat">
            <div class="aura-stat-value" th:text="${respectScore}">90</div>
            <div class="aura-stat-label"><i class="fas fa-handshake mr-1"></i> Respect</div>
        </div>
        <div class="aura-stat">
            <div class="aura-stat-value" th:text="${authenticityScore}">75</div>
            <div class="aura-stat-label"><i class="fas fa-user-check mr-1"></i> Authenticity</div>
        </div>
        <div class="aura-stat">
            <div class="aura-stat-value" th:text="${investmentScore}">80</div>
            <div class="aura-stat-label"><i class="fas fa-heart mr-1"></i> Investment</div>
        </div>
    </div>

    <!-- Detailed Breakdowns -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
        <div class="aura-card">
            <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">
                <i class="fas fa-comments" style="color: var(--aura-info);"></i>
                <span th:text="#{reputation.response}" style="margin-left: 0.5rem;">Response Quality</span>
            </h3>
            <div class="aura-progress-bar" style="height: 10px;">
                <div class="aura-progress-fill" th:style="'width: ' + ${responseQuality} + '%'"></div>
            </div>
            <p style="font-size: 0.875rem; color: var(--aura-gray-500); margin-top: 0.5rem;"
               th:text="#{reputation.response.desc}">Based on message quality and response times.</p>
        </div>

        <div class="aura-card">
            <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">
                <i class="fas fa-handshake" style="color: var(--aura-success);"></i>
                <span th:text="#{reputation.respect}" style="margin-left: 0.5rem;">Respect Score</span>
            </h3>
            <div class="aura-progress-bar" style="height: 10px;">
                <div class="aura-progress-fill" th:style="'width: ' + ${respectScore} + '%'" style="background: var(--aura-gradient-success);"></div>
            </div>
            <p style="font-size: 0.875rem; color: var(--aura-gray-500); margin-top: 0.5rem;"
               th:text="#{reputation.respect.desc}">How respectfully you interact with others.</p>
        </div>

        <div class="aura-card">
            <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">
                <i class="fas fa-user-check" style="color: var(--aura-primary);"></i>
                <span th:text="#{reputation.authenticity}" style="margin-left: 0.5rem;">Authenticity</span>
            </h3>
            <div class="aura-progress-bar" style="height: 10px;">
                <div class="aura-progress-fill" th:style="'width: ' + ${authenticityScore} + '%'"></div>
            </div>
            <p style="font-size: 0.875rem; color: var(--aura-gray-500); margin-top: 0.5rem;"
               th:text="#{reputation.authenticity.desc}">Profile completeness and verification status.</p>
        </div>

        <div class="aura-card">
            <h3 style="font-size: 1rem; font-weight: 600; margin-bottom: 1rem;">
                <i class="fas fa-heart" style="color: var(--aura-secondary);"></i>
                <span th:text="#{reputation.investment}" style="margin-left: 0.5rem;">Investment</span>
            </h3>
            <div class="aura-progress-bar" style="height: 10px;">
                <div class="aura-progress-fill" th:style="'width: ' + ${investmentScore} + '%'" style="background: var(--aura-gradient-warm);"></div>
            </div>
            <p style="font-size: 0.875rem; color: var(--aura-gray-500); margin-top: 0.5rem;"
               th:text="#{reputation.investment.desc}">Your commitment to meaningful connections.</p>
        </div>
    </div>

    <!-- Stats -->
    <div class="aura-card" style="margin-top: 1.5rem;">
        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1.5rem; text-align: center;">
            <i class="fas fa-chart-bar mr-2"></i> <span th:text="#{reputation.stats}">Statistics</span>
        </h3>
        <div class="aura-stats">
            <div class="aura-stat">
                <div class="aura-stat-value" th:text="${datesCompleted}">5</div>
                <div class="aura-stat-label" th:text="#{reputation.dates.completed}">Dates Completed</div>
            </div>
            <div class="aura-stat">
                <div class="aura-stat-value" th:text="${positiveFeedback}">12</div>
                <div class="aura-stat-label" th:text="#{reputation.positive.feedback}">Positive Feedback</div>
            </div>
            <div class="aura-stat">
                <div class="aura-stat-value" th:text="${ghostingCount}">0</div>
                <div class="aura-stat-label" th:text="#{reputation.ghosting}">Ghosting Events</div>
            </div>
        </div>
    </div>

    <!-- Recent Activity -->
    <div class="aura-card" th:if="${not #lists.isEmpty(recentActivity)}" style="margin-top: 1.5rem;">
        <h3 style="font-size: 1.125rem; font-weight: 600; margin-bottom: 1.5rem;">
            <i class="fas fa-history mr-2"></i> <span th:text="#{reputation.activity}">Recent Activity</span>
        </h3>
        <div class="aura-timeline">
            <div th:each="event : ${recentActivity}" class="aura-timeline-item">
                <div class="aura-timeline-dot" th:style="${event.impact > 0} ? 'background: var(--aura-success)' : 'background: var(--aura-danger)'"></div>
                <div class="aura-timeline-content">
                    <div class="aura-timeline-date" th:text="${#dates.format(event.date, 'MMM dd, yyyy')}"></div>
                    <p th:text="${event.description}" style="margin-bottom: 0.5rem;">Activity description</p>
                    <span class="aura-trait" th:classappend="${event.impact > 0} ? 'aura-trait-positive' : 'aura-trait-negative'"
                          th:text="${(event.impact > 0 ? '+' : '') + event.impact}">+2.0</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Tips to Improve -->
    <div class="aura-alert aura-alert-info" th:if="${overallScore < 70}" style="margin-top: 1.5rem;">
        <i class="fas fa-lightbulb fa-lg"></i>
        <div>
            <strong th:text="#{reputation.improve.title}">Tips to Improve</strong>
            <ul style="margin-top: 0.5rem; padding-left: 1.25rem;">
                <li th:if="${not videoVerified}" th:text="#{reputation.improve.verify}">
                    Complete video verification to boost your authenticity score
                </li>
                <li th:if="${responseQuality < 70}" th:text="#{reputation.improve.response}">
                    Respond to messages more promptly
                </li>
                <li th:if="${datesCompleted < 3}" th:text="#{reputation.improve.dates}">
                    Complete more video dates to show investment
                </li>
            </ul>
        </div>
    </div>
</div>

<div th:replace="~{fragments :: footer}"></div>

</body>
</html>
