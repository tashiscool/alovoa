# Use H2 for local testing (no Docker required)
# NON_KEYWORDS allows reserved keywords as identifiers (USER, VALUE are used as column/table names)
spring.datasource.url=jdbc:h2:mem:alovoa_test;MODE=MariaDB;DATABASE_TO_LOWER=TRUE;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE;NON_KEYWORDS=USER,VALUE
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.id.db_structure_naming_strategy=standard
spring.jpa.properties.hibernate.format_sql=false
spring.h2.console.enabled=true

# Disable Flyway for H2 tests - use Hibernate schema generation instead
spring.flyway.enabled=false

# Defer datasource initialization to ensure schema is created first
spring.jpa.defer-datasource-initialization=true

# keys for transparent database encryption
app.text.key=bqupWgmhCj3fedLxYdNAy2QFA2bS9XJX
app.text.salt=sFRKQAhwdrZq44FQ
app.text.encrypt.return-null-on-fail=true

app.admin.email=admin@alovoa.com
app.admin.key=password
app.scheduling.enabled=true

# we don't have a working mail setup, so don't test the connection
spring.mail.test-connection=false

# fix "Too many connections" error, see https://stackoverflow.com/a/63474915/4266296
spring.datasource.hikari.minimum-idle=1

spring.cache.type=NONE
bucket4j.enabled=false

spring.security.oauth2.client.registration.google.client-id=test
spring.security.oauth2.client.registration.google.client-secret=test
spring.security.oauth2.client.registration.facebook.client-id=test
spring.security.oauth2.client.registration.facebook.client-secret=test

# Content moderation - uses keyword filter fallback (no Perspective API)
app.moderation.enabled=true
app.moderation.api-key=
